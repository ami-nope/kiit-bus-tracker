<!DOCTYPE html>
<html>
<head>
    <title>Admin Login — Campus Transport</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#071018; color:#e6eef8; padding:20px }
        .box { max-width:420px; margin:36px auto; background:#0d1117; padding:18px; border-radius:10px; border:1px solid rgba(255,255,255,0.03) }
        h1 { font-size:18px; margin-bottom:6px }
        p { color:#9aa4b2; margin-bottom:12px }
        label { display:block; font-size:13px; color:#9aa4b2; margin-top:8px }
        input { width:100%; padding:10px; border-radius:8px; margin-top:6px; background:#07101a; border:1px solid rgba(255,255,255,0.04); color:#e6eef8 }
        button { margin-top:12px; padding:10px 12px; border-radius:8px; background:#34d399; border:none; color:#042017; cursor:pointer }
        .muted { color:#9aa4b2; font-size:13px; margin-top:8px }
        .note { font-size:12px; color:#8893a6 }
    </style>
</head>
<body>
    <div class="box">
        <h1>{{ institute_name | default('Institute') }} — Admin</h1>
        <p class="muted">Sign in using your admin username and password.</p>

        {% if not credentials_exist %}
        <div class="note">No admin account detected. Fill in details to create the initial admin account.</div>
        {% endif %}


        {% if error_text %}
        <div style="color:#ff5a5a; margin-bottom:10px; font-size:14px;">{{ error_text }}</div>
        {% endif %}
        <form method="POST" action="/admin/login">
            <label>Campus Transport System-Admin Login</label>
            <input name="institute_name" placeholder="E.g. Your Institute" value="{{ institute_name | default('') }}">

            <label>Admin Username</label>
            <input name="username" placeholder="admin" required>

            <label>Password</label>
            <input name="password" type="password" placeholder="Enter password" required>

            <div id="signup-fields" style="display: none;">
                <label>6-digit Signup Pin</label>
                <input name="signup_pin" type="password" maxlength="6" placeholder="Enter 6-digit pin">
            </div>

            <button type="submit" name="action" value="login">Login</button>
            <button type="button" onclick="showSignupFields();">Signup</button>
            <button type="submit" name="action" value="signup" id="createBtn" style="display:none;">Create Account</button>
        </form>
        <script>
        function showSignupFields() {
            document.getElementById('signup-fields').style.display = 'block';
            var btn = document.getElementById('createBtn');
            if (btn) btn.style.display = 'inline-block';
        }
        </script>

        <div class="note" style="margin-top:12px">
            
        </div>
    </div>
</body>
</html>
